/**
Developed by: Riah
Test name: Test 150 - Starter Package Upsell (Category pages)v1
**/
(() => {
    'use strict';
    const myInterval = setInterval(() => {
        const courseSeriesText = document.querySelector('#core-courses .p1') || document.querySelector('.courseSeries p');
        if (courseSeriesText) {
            clearInterval(myInterval);
            optiInit(courseSeriesText);
        }
    }, 300);
    const copyForCategoryPages = {
        'tuning starter package': {
            packageToLinkTo: 'https://www.hpacademy.com/hpa-starter-package/',
            courseLandingPages: ['https://www.hpacademy.com/courses/efi-tuning/'],
            copy: 'The Tuning Starter Package includes five courses and saves you <strong>over 60% OFF</strong> the individual price.',
            alreadyHasBlock: true,
        },
        'wiring starter package': {
            packageToLinkTo: 'https://www.hpacademy.com/hpa-wiring-starter-package/',
            courseLandingPages: ['https://www.hpacademy.com/courses/learn-motorsport-wiring/'],
            copy: 'The Wiring Starter Package includes two courses and saves you <strong>over 60% OFF</strong> the individual price.',
            alreadyHasBlock: false,
        },
        'engine building starter package': {
            packageToLinkTo: 'https://www.hpacademy.com/hpa-engine-building-starter-package/',
            courseLandingPages: ['https://www.hpacademy.com/courses/learn-how-to-build-engines/'],
            copy: 'The Engine Building Starter Package includes three courses and saves you <strong>over 60% OFF</strong> the individual price.',
            alreadyHasBlock: false,
        },
        'diesel tuning starter package': {
            packageToLinkTo: 'https://www.hpacademy.com/hpa-diesel-tuning-starter-package/',
            courseLandingPages: ['https://www.hpacademy.com/courses/diesel-tuning/'],
            copy: 'The Diesel Tuning Starter Package includes two courses and saves you <strong>over 60% OFF</strong> the individual price.',
            alreadyHasBlock: true,
        },
        'track day package': {
            packageToLinkTo: 'https://www.hpacademy.com/hpa-track-day-starter-package/',
            courseLandingPages: [
                'https://www.hpacademy.com/courses/suspension-and-car-setup/',
                'https://www.hpacademy.com/courses/driver-training-and-improvement/',
            ],
            copy: 'The Track Day Package includes four courses and saves you <strong>over 50% OFF</strong> the individual price.',
            alreadyHasBlock: false,
        },
        'fabrication package': {
            packageToLinkTo: 'https://www.hpacademy.com/hpa-fabrication-starter-package/',
            courseLandingPages: ['https://www.hpacademy.com/courses/motorsport-fabrication-and-design/'],
            copy: 'The Fabrication Starter Package includes two courses and saves you <strong>over 60% OFF</strong> the individual price.',
            alreadyHasBlock: false,
        },
    };
    const tagIcon = `<svg
		xmlns="http://www.w3.org/2000/svg"
		xmlns:xlink="http://www.w3.org/1999/xlink"
		id="svg"
		version="1.1"
		width="18"
		height="18"
		viewBox="0, 0, 400,400">
		<g id="svgg">
			<path
				id="path0"
				d="M214.667 8.363 C 213.842 8.513,212.342 8.733,211.333 8.852 C 210.325 8.971,209.350 9.171,209.167 9.297 C 208.983 9.423,208.416 9.568,207.906 9.621 C 207.396 9.674,206.571 9.930,206.073 10.190 C 205.574 10.450,204.826 10.663,204.409 10.665 C 203.993 10.666,202.366 11.267,200.793 12.000 C 199.220 12.733,197.799 13.333,197.634 13.333 C 197.468 13.333,197.333 13.492,197.333 13.686 C 197.333 13.880,197.193 13.952,197.020 13.846 C 196.848 13.740,196.572 13.894,196.407 14.190 C 196.242 14.485,195.970 14.733,195.803 14.742 C 195.239 14.770,193.333 15.788,193.333 16.062 C 193.333 16.211,193.114 16.333,192.845 16.333 C 192.577 16.333,192.194 16.638,191.995 17.009 C 191.796 17.381,191.509 17.609,191.357 17.515 C 191.205 17.421,190.359 18.017,189.476 18.839 C 188.593 19.661,187.816 20.333,187.750 20.333 C 187.371 20.333,15.667 192.275,15.667 192.654 C 15.667 192.905,15.572 193.016,15.455 192.900 C 15.229 192.673,13.000 195.423,13.000 195.928 C 13.000 196.094,12.631 196.659,12.180 197.184 C 11.729 197.709,11.416 198.194,11.484 198.262 C 11.552 198.330,11.162 199.336,10.618 200.499 C 10.074 201.661,9.606 202.924,9.577 203.306 C 9.548 203.688,9.424 204.000,9.300 204.000 C 9.103 204.000,8.919 204.871,8.455 208.000 C 8.226 209.550,8.081 214.637,8.262 214.817 C 8.360 214.916,8.486 215.485,8.541 216.081 C 8.596 216.678,8.662 217.392,8.688 217.667 C 8.951 220.450,11.744 227.244,13.306 228.903 C 13.688 229.308,14.000 229.758,14.000 229.903 C 14.001 230.145,14.643 230.979,16.043 232.555 C 19.969 236.977,169.299 385.559,170.833 386.571 C 173.494 388.327,177.627 390.278,179.217 390.529 C 179.923 390.641,180.650 390.828,180.833 390.945 C 181.017 391.061,181.242 391.170,181.333 391.186 C 187.228 392.249,194.896 391.693,198.023 389.977 C 198.469 389.732,199.014 389.502,199.234 389.465 C 199.454 389.427,200.504 388.988,201.567 388.487 C 203.348 387.649,204.498 386.868,207.167 384.680 C 209.257 382.968,378.682 213.472,378.859 212.917 C 378.961 212.596,379.250 212.333,379.500 212.333 C 379.750 212.333,380.049 212.037,380.164 211.675 C 380.279 211.313,380.759 210.713,381.231 210.342 C 381.704 209.971,381.966 209.667,381.815 209.667 C 381.664 209.667,381.869 209.361,382.270 208.987 C 382.672 208.613,383.000 208.164,383.000 207.990 C 383.000 207.815,383.337 207.288,383.750 206.818 C 384.466 206.003,386.467 202.721,386.891 201.667 C 387.002 201.392,387.587 200.019,388.191 198.617 C 389.112 196.480,389.719 194.727,390.196 192.833 C 390.242 192.650,390.379 191.918,390.501 191.208 C 390.622 190.497,390.802 189.597,390.901 189.208 C 391.108 188.390,391.254 187.406,391.647 184.167 C 391.995 181.307,391.922 35.500,391.573 34.333 C 391.435 33.875,391.248 32.933,391.156 32.240 C 391.065 31.546,390.769 30.346,390.500 29.573 C 390.230 28.799,390.008 27.895,390.005 27.564 C 390.002 27.232,389.850 27.053,389.667 27.167 C 389.483 27.280,389.333 27.137,389.333 26.848 C 389.333 26.560,389.196 26.064,389.028 25.745 C 388.860 25.427,388.463 24.572,388.145 23.846 C 386.633 20.385,379.278 12.667,377.493 12.667 C 377.371 12.667,376.893 12.369,376.430 12.005 C 375.967 11.640,375.456 11.424,375.294 11.524 C 375.132 11.624,375.000 11.568,375.000 11.398 C 375.000 11.161,372.677 10.058,371.667 9.816 C 371.575 9.794,371.275 9.688,371.000 9.582 C 370.394 9.346,368.802 8.998,367.667 8.852 C 367.208 8.793,366.233 8.578,365.500 8.376 C 363.909 7.936,217.090 7.923,214.667 8.363 M308.833 68.836 C 309.383 68.909,310.058 69.025,310.333 69.093 C 312.178 69.552,313.976 70.122,314.833 70.519 C 315.383 70.774,316.208 71.136,316.667 71.324 C 317.685 71.741,318.462 72.222,320.047 73.417 C 320.715 73.921,321.437 74.333,321.651 74.333 C 321.865 74.333,321.971 74.446,321.888 74.583 C 321.805 74.721,321.946 75.027,322.202 75.263 C 322.457 75.500,322.667 75.605,322.667 75.498 C 322.667 75.391,323.045 75.681,323.508 76.144 C 323.970 76.606,324.338 77.071,324.324 77.177 C 324.311 77.282,324.745 77.784,325.289 78.292 C 326.313 79.248,327.758 81.491,328.376 83.083 C 328.572 83.587,328.835 84.000,328.962 84.000 C 329.088 84.000,329.216 84.324,329.246 84.720 C 329.276 85.116,329.431 85.529,329.591 85.637 C 329.895 85.842,330.778 88.749,330.778 89.544 C 330.778 89.795,330.866 90.000,330.973 90.000 C 331.198 90.000,331.273 90.896,331.429 95.500 C 331.491 97.333,331.433 98.983,331.299 99.167 C 331.166 99.350,331.055 99.615,331.054 99.756 C 331.051 100.004,330.855 100.969,330.463 102.667 C 330.357 103.125,330.276 103.766,330.282 104.091 C 330.288 104.415,330.152 104.594,329.980 104.488 C 329.694 104.311,329.635 104.478,329.533 105.750 C 329.515 105.979,329.422 106.242,329.327 106.333 C 329.091 106.560,328.428 108.096,328.407 108.463 C 328.398 108.626,328.258 108.851,328.096 108.963 C 327.934 109.075,327.441 109.692,327.000 110.333 C 326.559 110.975,326.042 111.610,325.849 111.745 C 325.657 111.880,325.623 111.992,325.774 111.995 C 325.924 111.998,325.825 112.222,325.554 112.494 C 325.282 112.766,325.009 113.103,324.946 113.244 C 324.845 113.475,323.532 114.647,321.302 116.500 C 319.930 117.641,318.000 119.012,318.000 118.847 C 318.000 118.760,317.169 119.145,316.154 119.702 C 315.139 120.260,313.912 120.787,313.427 120.875 C 312.943 120.963,312.386 121.135,312.190 121.258 C 311.805 121.499,311.301 121.625,310.000 121.803 C 309.542 121.866,308.342 122.033,307.333 122.173 C 304.638 122.549,303.642 122.567,302.247 122.266 C 301.558 122.117,300.346 121.946,299.555 121.887 C 298.764 121.827,297.938 121.668,297.720 121.533 C 297.501 121.398,296.912 121.214,296.411 121.124 C 295.910 121.034,295.064 120.745,294.532 120.480 C 294.000 120.216,293.362 120.000,293.115 120.000 C 292.869 120.000,292.667 119.841,292.667 119.647 C 292.667 119.453,292.517 119.387,292.333 119.500 C 292.150 119.613,292.000 119.547,292.000 119.353 C 292.000 119.159,291.836 119.000,291.636 119.000 C 291.436 119.000,290.893 118.702,290.430 118.338 C 289.967 117.974,289.456 117.758,289.294 117.858 C 289.132 117.958,289.000 117.867,289.000 117.656 C 289.000 117.276,287.700 116.032,287.281 116.011 C 287.010 115.997,284.000 113.093,284.000 112.846 C 284.000 112.670,283.661 112.244,282.333 110.750 C 281.967 110.337,281.770 110.000,281.897 110.000 C 282.024 110.000,281.836 109.780,281.480 109.511 C 281.125 109.241,280.938 109.016,281.065 109.011 C 281.193 109.005,280.751 107.912,280.083 106.583 C 279.415 105.254,278.897 104.059,278.931 103.928 C 278.965 103.797,278.830 103.272,278.631 102.762 C 278.433 102.251,278.229 101.533,278.179 101.167 C 278.129 100.800,277.960 99.675,277.803 98.667 C 277.499 96.707,277.499 93.800,277.803 92.167 C 277.906 91.617,278.049 90.642,278.122 90.000 C 278.250 88.870,278.427 88.233,279.000 86.833 C 279.333 86.020,279.760 84.893,279.821 84.667 C 280.420 82.433,284.678 76.973,287.634 74.646 C 289.027 73.550,290.354 72.500,290.583 72.313 C 290.813 72.126,291.002 72.092,291.005 72.237 C 291.008 72.382,291.120 72.342,291.255 72.149 C 291.510 71.785,293.845 70.611,294.178 70.681 C 294.283 70.702,294.698 70.506,295.101 70.244 C 295.792 69.794,298.205 69.155,298.750 69.277 C 298.887 69.308,299.000 69.210,299.000 69.059 C 299.000 68.909,299.840 68.768,300.867 68.748 C 301.894 68.727,302.829 68.616,302.943 68.501 C 303.131 68.313,306.211 68.489,308.833 68.836 "
				stroke="none"
				fill="#6c6c74"
				fill-rule="evenodd" />
			<path
				id="path1"
				d="M205.333 10.195 C 204.242 10.642,204.231 10.660,205.167 10.479 C 205.717 10.373,206.309 10.147,206.483 9.976 C 206.883 9.586,206.768 9.608,205.333 10.195 M188.333 19.500 C 187.903 19.958,187.689 20.329,187.859 20.323 C 188.144 20.313,189.517 18.667,189.240 18.667 C 189.172 18.667,188.764 19.042,188.333 19.500 M136.652 70.911 C 118.602 88.997,104.583 103.110,105.500 102.272 C 108.665 99.380,169.745 38.301,169.609 38.164 C 169.533 38.089,154.703 52.825,136.652 70.911 M303.587 68.569 C 304.002 68.649,304.602 68.646,304.921 68.562 C 305.239 68.479,304.900 68.414,304.167 68.417 C 303.433 68.421,303.173 68.489,303.587 68.569 M322.667 75.614 C 322.667 75.971,324.290 77.488,324.475 77.303 C 324.554 77.224,324.179 76.751,323.643 76.252 C 323.106 75.752,322.667 75.465,322.667 75.614 M326.234 79.801 C 326.564 80.241,326.881 80.556,326.940 80.500 C 327.115 80.333,326.195 79.000,325.904 79.000 C 325.756 79.000,325.905 79.360,326.234 79.801 M98.326 109.583 L 95.500 112.500 98.417 109.674 C 101.126 107.049,101.485 106.667,101.243 106.667 C 101.193 106.667,99.880 107.979,98.326 109.583 M323.653 114.234 L 322.167 115.801 323.550 114.650 C 324.705 113.690,325.569 112.667,325.226 112.667 C 325.178 112.667,324.470 113.372,323.653 114.234 M73.829 134.083 L 68.500 139.500 73.917 134.171 C 78.949 129.219,79.484 128.667,79.246 128.667 C 79.198 128.667,76.761 131.104,73.829 134.083 "
				stroke="none"
				fill="#6c6c6c"
				fill-rule="evenodd" />
			<path
				id="path2"
				d="M180.496 27.083 L 175.167 32.500 180.583 27.171 C 185.616 22.219,186.151 21.667,185.913 21.667 C 185.865 21.667,183.427 24.104,180.496 27.083 M173.000 34.500 C 172.190 35.325,171.603 36.000,171.695 36.000 C 171.786 36.000,172.524 35.325,173.333 34.500 C 174.143 33.675,174.730 33.000,174.639 33.000 C 174.547 33.000,173.810 33.675,173.000 34.500 M91.500 308.333 C 132.933 349.767,166.908 383.667,166.999 383.667 C 167.091 383.667,133.266 349.767,91.833 308.333 C 50.400 266.900,16.426 233.000,16.334 233.000 C 16.242 233.000,50.067 266.900,91.500 308.333 "
				stroke="none"
				fill="#706c74"
				fill-rule="evenodd" />
			<path
				id="path3"
				d="M180.496 27.083 L 175.167 32.500 180.583 27.171 C 185.616 22.219,186.151 21.667,185.913 21.667 C 185.865 21.667,183.427 24.104,180.496 27.083 M173.000 34.500 C 172.190 35.325,171.603 36.000,171.695 36.000 C 171.786 36.000,172.524 35.325,173.333 34.500 C 174.143 33.675,174.730 33.000,174.639 33.000 C 174.547 33.000,173.810 33.675,173.000 34.500 M91.500 308.333 C 132.933 349.767,166.908 383.667,166.999 383.667 C 167.091 383.667,133.266 349.767,91.833 308.333 C 50.400 266.900,16.426 233.000,16.334 233.000 C 16.242 233.000,50.067 266.900,91.500 308.333 "
				stroke="none"
				fill="#706c74"
				fill-rule="evenodd" />
			<path
				id="path4"
				d="M180.496 27.083 L 175.167 32.500 180.583 27.171 C 185.616 22.219,186.151 21.667,185.913 21.667 C 185.865 21.667,183.427 24.104,180.496 27.083 M173.000 34.500 C 172.190 35.325,171.603 36.000,171.695 36.000 C 171.786 36.000,172.524 35.325,173.333 34.500 C 174.143 33.675,174.730 33.000,174.639 33.000 C 174.547 33.000,173.810 33.675,173.000 34.500 M91.500 308.333 C 132.933 349.767,166.908 383.667,166.999 383.667 C 167.091 383.667,133.266 349.767,91.833 308.333 C 50.400 266.900,16.426 233.000,16.334 233.000 C 16.242 233.000,50.067 266.900,91.500 308.333 "
				stroke="none"
				fill="#706c74"
				fill-rule="evenodd" />
		</g>
	</svg>`;
    const xIcon = `<svg
		xmlns="http://www.w3.org/2000/svg"
		width="16"
		height="16"
		viewBox="0 0 16 16"
		alt=""
		style="
    fill: #404043;
">
		<path
			d="M2.3 3.7c-.4-.4-.4-1 0-1.4.4-.4 1-.4 1.4 0L8 6.6l4.3-4.3c.4-.4 1-.4 1.4 0 .4.4.4 1 0 1.4L9.4 8l4.3 4.3c.4.4.4 1 0 1.4-.4.4-1 .4-1.4 0L8 9.4l-4.3 4.3c-.4.4-1 .4-1.4 0-.4-.4-.4-1 0-1.4L6.6 8 2.3 3.7z"></path>
	</svg>`;
    const optiInit = (courseSeriesText) => {
        const currentUrl = window.location.href;
        const baseUrl = new URL(currentUrl).origin + new URL(currentUrl).pathname;
        const matchingCourse = Object.keys(copyForCategoryPages).find((course) => copyForCategoryPages[course].courseLandingPages.some((page) => page === baseUrl // Compare against the base URL only
        ));
        if (!matchingCourse) {
            return;
        }
        document.body.classList.add('opti_starter_package_upsell_category_test');
        const courseInfo = copyForCategoryPages[matchingCourse];
        const packageLink = courseInfo.packageToLinkTo;
        const copy = courseInfo.copy;
        const upsellBannerHtml = `<div id="opti_upsellBanner">
		<span class="opti_banner_close_icon">${xIcon}</span>
		<p class="opti_upsellBanner_text"><span class="opti_tag_icon">${tagIcon}</span><span class="opti_copy_text">${copy}<a href=${packageLink}>Learn More</a></span></p>
		</div>`;
        courseSeriesText.insertAdjacentHTML('afterend', upsellBannerHtml);
        const waitForCloseIcon = setInterval(() => {
            const closeIcon = document.querySelector('.opti_banner_close_icon');
            const upsellBanner = document.querySelector('#opti_upsellBanner');
            if (closeIcon && upsellBanner) {
                clearInterval(waitForCloseIcon);
                closeIcon.onclick = () => {
                    upsellBanner.remove();
                };
            }
        }, 300);
    };
    setTimeout(function () {
        if (myInterval) {
            clearInterval(myInterval);
        }
    }, 15000);
})();

